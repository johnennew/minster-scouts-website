import { GetServerSideProps } from 'next'
import Head from 'next/head'
import styles from '../styles/Home.module.css'
import { Client } from '../utils/prismicHelpers'
import {PrismicRichText, SliceZone} from "@prismicio/react";
import TextAndImage from '../slices/TextAndImage'
import {Homepage} from "../utils/types";

interface HomepageDocument {
    document: Homepage;
}

export const getServerSideProps: GetServerSideProps<HomepageDocument> = async (context) => {
  const document = await Client().getSingle<Homepage>('homepage');

  return {
    props: {
      document
    },
  }
}

export default function Home( homepage: HomepageDocument ) {
console.log(homepage);
  return (
    <div className={styles.container}>
      <Head>
        <title>Scouts</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main className={styles.main}>
          <div id="content" className="pb-5">
              <div className="darkblue">
                  <div className="container py-8">
                      <div className="row d-flex align-items-center text-white">
                          <div className="col-12 col-sm-8 col-md-7 col-lg-6 col-xl-6">
                              <PrismicRichText field={homepage.document.data.title} />
                          </div>
                      </div>
                  </div>
              </div>

              <div className="container">
                  <SliceZone
                      slices={homepage.document.data.slices}
                      components={{
                          text_and_image: TextAndImage,
                      }}
                  />
              </div>
          </div>
      </main>

    </div>
  )
}
